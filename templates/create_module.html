
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Module</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="\static\css\home_page.css">
    <link rel="stylesheet" href="\static\css\create_module.css">
</head>
<body>
    {% include 'navbar.html' %}
    <!-- create module form------------------- -->
    <div class="container-fluid px-lg-5 mt-4 mb-5">
        <div class="row">
            <!-- Left Sidebar for Summary -->
            <div class="col-lg-4">
                <!-- Mobile Toggle Button -->
                <button class="btn btn-primary d-lg-none position-fixed bottom-0 end-0 m-4 rounded-circle shadow" 
                        type="button" 
                        data-bs-toggle="offcanvas" 
                        data-bs-target="#summaryOffcanvas" 
                        style="width: 60px; height: 60px; z-index: 1100;">
                    <i class="bi bi-list-check fs-4"></i>
                </button>
                <!-- Responsive Offcanvas -->
                <div class="offcanvas-lg offcanvas-start" tabindex="-1" id="summaryOffcanvas" aria-labelledby="summaryOffcanvasLabel">
                    <div class="offcanvas-header border-bottom d-lg-none">
                        <h5 class="offcanvas-title" id="summaryOffcanvasLabel">Module Summary</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#summaryOffcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body p-0">
                        <div class="sticky-top w-100" style="top: 20px; z-index: 90;">
                            <div class="card shadow-sm border-0 rounded-3">
                                <div class="card-header bg-white border-bottom-0 pt-4 pb-0">
                                    <h5 class="text-primary fw-bold">Module Summary</h5>
                                </div>
                                <div class="card-body p-4">
                                    <!-- Module Info Preview Section -->
                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-2">
                                            <h6 class="text-secondary mb-0">Module Info</h6>
                                            <button class="btn btn-sm btn-outline-primary py-0" id="edit_module_details_btn" style="font-size: 0.8rem;">Edit</button>
                                        </div>
                                        <div class="bg-light p-3 rounded-3">
                                            <h5 class="fw-bold text-dark mb-1 text-break" id="preview_title">Untitled Module</h5>
                                            <p class="text-muted small mb-2 text-break" id="preview_desc">No description added.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-primary" id="preview_cat">Category</span>
                                                <span class="fw-bold text-success fs-5" id="preview_price"></span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Chapter Stack Display Section -->
                                    <div id="chapter_stack_container" class="mb-4 d-none">
                                        <h6 class="text-secondary border-bottom pb-2 mb-2"><i class="bi bi-stack"></i> Added Chapters</h6>
                                        <div class="list-group list-group-flush rounded-3 border" id="chapter_stack_list"></div>
                                    </div>

                                    <!-- Question Stack Display Section -->
                                    <div id="question_stack_container" class="mb-4 d-none">
                                        <h6 class="text-secondary border-bottom pb-2 mb-2"><i class="bi bi-stack"></i> Added Questions</h6>
                                        <div class="list-group list-group-flush rounded-3 border" id="question_stack_list"></div>
                                    </div>

                                    <div class="d-grid mt-3">
                                        <button class="btn btn-success btn-lg fw-bold" id="module_submit"><i class="bi bi-check-circle-fill me-2"></i> Submit Module</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <!-- Module Details Card -->
                <div class="card shadow-sm mb-4 border-0 rounded-3" id="module_details_card">
                    <div class="card-header bg-white border-bottom-0 pt-4 pb-0">
                        <h3 class="text-primary fw-bold">Module Details</h3>
                    </div>
                    <div class="card-body p-4">
                        <form action="" id="module">
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Module Title</label>
                                <input type="text" class="form-control form-control-lg" placeholder="e.g. Advanced Python Programming" id="module_title">
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Module Description</label>
                                <textarea class="form-control" rows="3" placeholder="Briefly describe what this module covers..." id="module_des"></textarea>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label fw-semibold">Price (â‚¹)</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-currency-rupee"></i></span>
                                        <input type="number" class="form-control" placeholder="0.00" id="module_price">
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label fw-semibold">Category</label>
                                    <select class="form-select" id="module_cat">
                                        <option selected value="0">Select Category</option>
                                        <option value="Ai">Artificial Intelligence</option>
                                        <option value="Deveploment">Development</option>
                                        <option value="Cyber Security">Cyber Security</option>
                                    </select>
                                </div>
                            </div>
                            <div class="text-end">
                                <button type="button" class="btn btn-primary" id="save_module_details_btn">Next <i class="bi bi-arrow-right"></i></button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Chapter Details Card -->
                <div class="card shadow-sm border-0 rounded-3 d-none" id="course_content_card">
                    <div class="card-header bg-white border-bottom-0 pt-4 pb-0 d-flex justify-content-between align-items-center">
                        <h3 class="text-primary fw-bold mb-0"><i class="bi bi-journal-bookmark me-2"></i>Course Content</h3>
                    </div>
                    
                    <div class="card-body p-4">
                        <div class="bg-light p-4 rounded-3 mb-4 border">
                            <h5 class="mb-3 text-secondary border-bottom pb-2">Add New Chapter</h5>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Chapter Title</label>
                                <input type="text" class="form-control" placeholder="e.g. Introduction to Variables" id="chapter_title" required>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label fw-semibold">Video URL</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-youtube text-danger"></i></span>
                                        <input type="url" class="form-control" placeholder="https://youtube.com/..." id="yt_url" required>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label fw-semibold">Notes URL</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-file-earmark-text text-primary"></i></span>
                                        <input type="url" class="form-control" placeholder="https://drive.google.com/..." id="notes_url" required>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-semibold">Chapter Description</label>
                                <textarea class="form-control" rows="2" placeholder="What will students learn in this chapter?" id="chapter_des" required></textarea>
                            </div>
                            <div class="text-end">
                                <button class="btn btn-outline-primary" id="addNewChapter"><i class="bi bi-plus-circle me-1"></i> Save Chapter</button>
                            </div>
                        </div>

                        <div class="d-grid mt-4">
                            <button class="btn btn-secondary btn-lg" data-bs-toggle="modal" data-bs-target="#addQuestion"><i class="bi bi-question-circle me-1"></i> Add Quiz Questions</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- for mcq question input---------------- -->
    <div class="modal fade" id="addQuestion" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content border-0 shadow">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold"><i class="bi bi-patch-question me-2"></i>Add MCQ Question</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="question-display">
                        <div class="m-3">
                            <label class="form-label fw-semibold">Question</label>
                            <input type="text" class="form-control" placeholder="Enter Question..." id="que">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text fw-bold">A</span>
                            <input type="text" class="form-control" placeholder="Option-A" id="op1">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text fw-bold">B</span>
                            <input type="text" class="form-control" placeholder="Option-B" id="op2">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text fw-bold">C</span>
                            <input type="text" class="form-control" placeholder="Option-C" id="op3">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text fw-bold">D</span>
                            <input type="text" class="form-control" placeholder="Option-D" id="op4">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text bg-success text-white fw-bold">Ans</span>
                            <select class="form-select" id="ans">
                                <option value="" selected>Select Correct Option</option>
                                <option value="A">Option A</option>
                                <option value="B">Option B</option>
                                <option value="C">Option C</option>
                                <option value="D">Option D</option>
                            </select>
                        </div>
                        <!-- to save current entered question data-------------------- -->
                        <div class="d-grid">
                            <button class="btn btn-primary" id="addNewQuestion"><i class="bi bi-plus-lg"></i> Save Question</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <!-- to save the all the questions--------------------------------- -->
                    <button type="button" class="btn btn-success" id="submitQuestion" data-bs-dismiss="modal">Done Adding Questions</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for Deleting Chapter -->
    <div class="modal fade" id="confirmRemoveModal" tabindex="-1" aria-labelledby="confirmRemoveModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content border-0 shadow">
          <div class="modal-header">
            <h5 class="modal-title text-danger" id="confirmRemoveModalLabel"><i class="bi bi-exclamation-triangle-fill me-2"></i>Confirm Removal</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p class="mb-0">Are you sure you want to remove this chapter from the stack? This action cannot be undone.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" id="confirmRemoveBtn">Remove</button>
          </div>
        </div>
      </div>
    </div>


    <script src="\static\js\create_module.js"></script>
</body>
</html>